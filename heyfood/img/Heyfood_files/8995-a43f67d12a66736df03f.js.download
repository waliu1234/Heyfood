(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8995],{8995:function(e,n,r){"use strict";r.d(n,{Z:function(){return Oe}});var t=r(85893),o=r(96156),a=r(34699),i=r(67294),l=r(41120),s=r(1182),c=r(32692),u=r(73637),p=r(17812),d=r(79512);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=function(e){var n;return h(h({},(0,d.Z)(e)),{},{root:(n={width:"37vw",maxHeight:"90vh",overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"transparent",width:"5px"},"&::-webkit-scrollbar-thumb":{background:e.palette.grey[300],borderRadius:"3em",transition:"all 0.5s","&:hover":{background:e.palette.grey[500]}},backgroundColor:e.palette.background.paper,borderRadius:"0.3em","&:focus":{outline:"none"}},(0,o.Z)(n,e.breakpoints.down("sm"),{width:"60vw"}),(0,o.Z)(n,e.breakpoints.down("xs"),{width:"95vw"}),n),toolbar:{display:"flex",justifyContent:"flex-end",paddingTop:e.spacing(3),paddingRight:e.spacing(1),"& button":{color:"black"}},main:{padding:"0em 2em 1em",position:"relative"}})},b=r(80366),g=r(87757),y=r.n(g),j=r(92137),O=r(22318),v=r(14741),x=r(30553),w=r(9570),P=r(66037),Z=r(282),N=r(95477);function S(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?S(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=function(e){return k(k({},(0,d.Z)(e)),{},{root:{"& h5":{fontSize:"160%",letterSpacing:"-0.5px",marginTop:"0.2em"}},input:{border:"0.5px solid #CECECE",borderRadius:"0.3em",padding:"0.9em 1.6em",fontSize:"95%",marginBottom:"1.4em"},submitButton:{backgroundColor:"black",padding:"0.85em",color:"white",fontFamily:e.typography.semiBold.fontFamily,fontSize:"115%","&:hover":{backgroundColor:"#333333"},borderRadius:"0.3em"},final:{margin:"2em 0em 1.8em",fontFamily:e.typography.semiBold.fontFamily,textAlign:"center","& span":{color:e.palette.primary.main,fontFamily:e.typography.bold.fontFamily,cursor:"pointer"}},errorRoot:{color:e.palette.error.main,marginBottom:"0.8em",fontSize:"90%"}})},E=r(86010),D=r(14494),B=r(41853);function I(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function F(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var T=(0,l.Z)((function(e){return C(e)})),z=function(e){var n=e.changeScreen,r=e.successCallback,l=T(),s=(0,D.I0)(),c=i.useState({name:"",phone:"",password:""}),u=(0,a.Z)(c,2),p=u[0],d=u[1],m=i.useState(""),h=(0,a.Z)(m,2),f=h[0],b=h[1],g=i.useState(!1),S=(0,a.Z)(g,2),k=S[0],C=S[1],I=i.useState(!1),z=(0,a.Z)(I,2),R=z[0],W=z[1],A=i.useState({auth:null,name:null,phone:null,password:null}),_=(0,a.Z)(A,2),M=_[0],L=_[1],H=function(){var e,n=p.name,r=p.phone,t=p.password,o={name:null,phone:null,password:null,auth:null};return n.length||(o.name="Please enter your name"),r.length||(o.phone="Please enter your phone number"),(r.length>14||r.length<11)&&(o.phone="Enter a valid phone number"),4===t.length&&Number.isInteger(Number(t))||(o.password="PIN must be 4 numbers"),e=Object.values(o).every((function(e){return!Boolean(e)})),L(o),e},V=function(){var e=(0,j.Z)(y().mark((function e(){var n,t,o,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=3;break}return e.abrupt("return");case 3:n=p.name,t=p.phone,o=p.password,a=f.length?f:sessionStorage.getItem("referralCode"),W(!0),s((0,B.z2)(n,o,t,a,(function(e,n){W(!1),e?L({name:null,phone:null,password:null,auth:e}):(W(!1),r&&r())})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){d(F(F({},p),{},(0,o.Z)({},e.target.name,e.target.value)))},X=function(e){return e?(0,t.jsx)("div",{className:l.errorRoot,children:e}):null};return(0,t.jsxs)("div",{className:l.root,children:[(0,t.jsx)(O.Z,{variant:"h6",className:l.semiBold,children:"Hi there!"}),(0,t.jsx)(O.Z,{variant:"h5",className:l.bold,children:"Fill in your details to get started"}),M.auth?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:l.spaceTop3}),X(M.auth)]}):null,(0,t.jsx)("div",{className:l.spaceTop4}),X(M.name),(0,t.jsx)(v.Z,{placeholder:"Name",className:(0,E.Z)(l.input),fullWidth:!0,name:"name",onChange:G}),X(M.phone),(0,t.jsx)(v.Z,{placeholder:"Phone number",className:l.input,fullWidth:!0,name:"phone",inputMode:"numeric",inputProps:{inputMode:"numeric"},onChange:G}),X(M.password),(0,t.jsx)(v.Z,{placeholder:"Create 4-digit PIN",className:l.input,fullWidth:!0,name:"password",onChange:G,inputMode:"numeric",inputProps:{inputMode:"numeric"}}),(0,t.jsx)(x.Z,{control:(0,t.jsx)(w.Z,{checked:k,color:"primary",onChange:function(e){C(e.target.checked)}}),label:(0,t.jsx)(O.Z,{variant:"body2",children:"I have a referral code"}),className:l.spaceBottom2}),(0,t.jsx)("div",{className:(0,E.Z)((0,o.Z)({},l.spaceBottom1,k)),style:{transition:"all 0.3s"},children:(0,t.jsx)(P.Z,{in:k,children:(0,t.jsx)(v.Z,{placeholder:"Referral code (optional)",className:(0,E.Z)(l.input,l.spaceBottom3),fullWidth:!0,onChange:function(e){b(e.target.value)}})})}),(0,t.jsx)(Z.Z,{className:l.submitButton,fullWidth:!0,disabled:R,onClick:V,children:R?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Sign up"}),(0,t.jsxs)(O.Z,{variant:"body2",className:l.final,children:["Already have an account? ",(0,t.jsx)("span",{onClick:function(){n("login")},children:"Log in"})]})]})};function R(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function W(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?R(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var A=function(e){return W(W({},(0,d.Z)(e)),{},{root:{"& h5":{fontSize:"160%",letterSpacing:"-0.5px",marginTop:"0.2em"}},input:{border:"0.5px solid #CECECE",borderRadius:"0.3em",padding:"0.9em 1.6em",fontSize:"95%",marginBottom:"1.4em"},submitButton:{backgroundColor:"black",padding:"0.85em",color:"white",fontFamily:e.typography.semiBold.fontFamily,fontSize:"115%","&:hover":{backgroundColor:"#333333"},borderRadius:"0.3em"},final:{margin:"2em 0em 1.8em",fontFamily:e.typography.semiBold.fontFamily,textAlign:"center","& span":{color:e.palette.primary.main,fontFamily:e.typography.bold.fontFamily,cursor:"pointer"}},errorRoot:{color:e.palette.error.main,marginBottom:"0.8em",fontSize:"90%"}})};function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var L=(0,l.Z)((function(e){return A(e)})),H=function(e){var n=e.changeScreen,r=e.successCallback,l=L(),s=(0,D.I0)(),c=i.useState({phone:"",password:""}),u=(0,a.Z)(c,2),p=u[0],d=u[1],m=i.useState(!1),h=(0,a.Z)(m,2),f=h[0],b=h[1],g=i.useState({auth:null,phone:null,password:null}),x=(0,a.Z)(g,2),w=x[0],P=x[1],S=function(){var e,n=p.phone,r=p.password,t={phone:null,password:null,auth:null};return n.length||(t.phone="Please enter your phone number"),(n.length>14||n.length<11)&&(t.phone="Enter a valid phone number"),4===r.length&&Number.isInteger(Number(r))||(t.password="PIN must be 4 numbers"),e=Object.values(t).every((function(e){return!Boolean(e)})),P(t),e},k=function(){var e=(0,j.Z)(y().mark((function e(){var n,t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S()){e.next=3;break}return e.abrupt("return");case 3:n=p.phone,t=p.password,b(!0),s((0,B.x4)(n,t,(function(e,n){b(!1),e?P({name:null,phone:null,password:null,auth:e}):(b(!1),r&&r())})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){d(M(M({},p),{},(0,o.Z)({},e.target.name,e.target.value)))},E=function(e){return e?(0,t.jsx)("div",{className:l.errorRoot,children:e}):null};return(0,t.jsxs)("div",{className:l.root,children:[(0,t.jsx)(O.Z,{variant:"h6",className:l.semiBold,children:"Welcome back!"}),(0,t.jsx)(O.Z,{variant:"h5",className:l.bold,children:"Fill in your details to proceed"}),w.auth?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:l.spaceTop3}),E(w.auth)]}):null,(0,t.jsx)("div",{className:l.spaceTop4}),E(w.phone),(0,t.jsx)(v.Z,{placeholder:"Phone number",className:l.input,fullWidth:!0,name:"phone",inputMode:"numeric",inputProps:{inputMode:"numeric"},onChange:C}),E(w.password),(0,t.jsx)(v.Z,{placeholder:"Enter PIN",className:l.input,fullWidth:!0,name:"password",onChange:C,inputMode:"numeric",inputProps:{inputMode:"numeric"}}),(0,t.jsx)(Z.Z,{className:l.submitButton,fullWidth:!0,disabled:f,onClick:k,children:f?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Log in"}),(0,t.jsxs)(O.Z,{variant:"body2",className:l.final,children:["Don't have an account? ",(0,t.jsx)("span",{onClick:function(){n("signup")},children:"Sign up"})]}),(0,t.jsx)(O.Z,{variant:"body2",className:l.final,children:(0,t.jsx)("span",{onClick:function(){n("forgot-pin")},children:"Forgot PIN"})})]})};function V(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function G(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?V(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var X=function(e){return G(G({},(0,d.Z)(e)),{},{root:{marginTop:"2em","& h5":{fontSize:"157%",letterSpacing:"-0.5px",marginTop:"0.2em"}},input:{border:"0.5px solid #CECECE",borderRadius:"0.3em",padding:"0.9em 1.6em",fontSize:"95%",marginBottom:"1.4em"},submitButton:{backgroundColor:"black",padding:"0.85em",color:"white",fontFamily:e.typography.semiBold.fontFamily,fontSize:"115%","&:hover":{backgroundColor:"#333333"},borderRadius:"0.3em",marginBottom:"7em"},resendButton:{marginTop:"-5.6em"},final:{margin:"2em 0em 1.8em",fontFamily:e.typography.semiBold.fontFamily,textAlign:"center","& span":{color:e.palette.primary.main,fontFamily:e.typography.bold.fontFamily,cursor:"pointer"}},completed:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",marginBottom:"3em","& img":{margin:"2em 0em"}},errorRoot:{color:e.palette.error.main,marginBottom:"0.8em",fontSize:"90%"}})},Y=r(54522),K=r(30381),U=r.n(K),$=r(9669),q=r.n($),J=r(27649);function Q(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ee(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ne=(0,l.Z)((function(e){return X(e)})),re=function(e){var n=e.changeScreen,r=ne(),l=(0,D.I0)(),s=i.useState(!1),c=(0,a.Z)(s,2),p=c[0],d=c[1],m=i.useState(1),h=(0,a.Z)(m,2),f=h[0],b=h[1],g=i.useState({phone:"",otp:"",pin:"",verifyPin:""}),x=(0,a.Z)(g,2),w=x[0],P=x[1],S=i.useState(null),k=(0,a.Z)(S,2),C=k[0],I=k[1],F=i.useState(null),T=(0,a.Z)(F,2),z=T[0],R=T[1],W=i.useState(null),A=(0,a.Z)(W,2),_=A[0],M=A[1],L=i.useState(null),H=(0,a.Z)(L,2),V=H[0],G=H[1],X=i.useState(null),K=(0,a.Z)(X,2),$=K[0],Q=K[1],re=i.useState(new Date),te=(0,a.Z)(re,2),oe=te[0],ae=te[1],ie=i.useState(null),le=(0,a.Z)(ie,2),se=(le[0],le[1]),ce=(0,D.v9)((function(e){return{isDineIn:Boolean(e.dineInParams)}})).isDineIn,ue=function(e){var n=e.target.name,r=e.target.value;try{if("otp"===n&&(r.length>6||!Number.isInteger(Number(r))))throw new Error(w.otp);if("pin"===n&&(r.length>4||!Number.isInteger(Number(r))))throw new Error(w.pin);if("verifyPin"===n&&(r.length>4||!Number.isInteger(Number(r))))throw new Error(w.verifyPin);P(ee(ee({},w),{},(0,o.Z)({},n,r)))}catch(a){if(P(ee(ee({},w),{},(0,o.Z)({},n,a.message))),!document)return;var t=document.getElementById("".concat(n,"_forgot_pin"));if(!t)return;t.value=a.message}},pe=function(){var e=w.phone;return e.length?e.length>14||e.length<11?I("Enter a valid phone number"):(I(null),Q(null),d(!0),void l((0,B.b9)(e,!0,(function(e,n){if(d(!1),e)return Q(e);ae(new Date(Date.now()+6e4)),b(2)})))):I("Enter a phone number")},de=function(){var e=(0,j.Z)(y().mark((function e(){var n,r,t,o,a,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.phone,r=w.pin,t=w.verifyPin,o=w.otp,r.length){e.next=3;break}return e.abrupt("return",M("Please choose a pin"));case 3:if(4===r.length&&!isNaN(r)){e.next=5;break}return e.abrupt("return",M("Pin must be four digits"));case 5:if(M(null),t===r){e.next=8;break}return e.abrupt("return",G("Your pins do not match"));case 8:return G(null),Q(null),d(!0),e.prev=11,e.next=14,q().post("".concat(J.P.url,"user/forgot/pin/reset"),{otp:o,phone:(0,Y.Xl)(n),pin:r});case 14:if(a=e.sent){e.next=17;break}throw new Error("Network error");case 17:if(!(i=a.data).error){e.next=20;break}throw new Error(i.message||"Something went wrong. Try again");case 20:d(!1),b(4),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(11),d(!1),Q(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[11,24]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){return e?(0,t.jsx)("div",{className:r.errorRoot,children:e}):null},he=1===f,fe=2===f,be=3===f,ge=4===f,ye=Date.now()>=oe.getTime(),je=function e(){Date.now()>=oe.getTime()?se(null):se(setTimeout(e,1e3))};return i.useEffect((function(){return ye||je(),console.log(ye),function(){se(null)}}),[oe]),(0,t.jsxs)("div",{className:r.root,children:[he?(0,t.jsx)(u.Z,{in:he,children:(0,t.jsxs)("div",{children:[(0,t.jsx)(O.Z,{variant:"h6",className:r.semiBold,children:"Forgot PIN"}),(0,t.jsx)(O.Z,{variant:"h5",className:r.bold,children:"Enter your phone number"}),$?(0,t.jsx)("div",{className:r.spaceTop3,children:me($)}):null,(0,t.jsx)("div",{className:r.spaceTop4}),C?(0,t.jsx)(t.Fragment,{children:me(C)}):null,(0,t.jsx)(v.Z,{placeholder:"Phone",className:(0,E.Z)(r.input),fullWidth:!0,name:"phone",id:"phone_forgot_pin",onChange:ue}),(0,t.jsx)(Z.Z,{className:r.submitButton,fullWidth:!0,disabled:p,onClick:pe,children:p?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Continue"})]})}):null,fe?(0,t.jsx)(u.Z,{in:fe,children:(0,t.jsxs)("div",{children:[(0,t.jsx)(O.Z,{variant:"h6",className:r.semiBold,children:"Forgot PIN"}),(0,t.jsxs)(O.Z,{variant:"h5",className:r.bold,children:["Enter the OTP that was sent to ",(0,Y.yD)(w.phone.replace("+234","0"),"nnn*****nnn")]}),$?(0,t.jsx)("div",{className:r.spaceTop3,children:me($)}):null,(0,t.jsx)("div",{className:r.spaceTop4}),z?(0,t.jsx)(t.Fragment,{children:me(z)}):null,(0,t.jsx)(v.Z,{placeholder:"OTP",className:(0,E.Z)(r.input),fullWidth:!0,name:"otp",id:"otp_forgot_pin",onChange:ue}),(0,t.jsx)(Z.Z,{className:r.submitButton,fullWidth:!0,disabled:p,onClick:function(){var e=w.phone,n=w.otp;return n.length?n.length<4||isNaN(n)?R("Enter a valid OTP"):(R(null),Q(null),d(!0),void l((0,B.Mu)(n,e,(function(e,n){if(d(!1),e)return Q(e);b(3)})))):R("Enter the OTP")},children:p?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Continue"}),(0,t.jsx)(Z.Z,{fullWidth:!0,className:r.resendButton,disabled:!ye,onClick:pe,children:ye?"Resend":"Resend in ".concat(U()(oe.toISOString()).diff(U()(),"seconds"))})]})}):null,be?(0,t.jsx)(u.Z,{in:be,children:(0,t.jsxs)("div",{children:[(0,t.jsx)(O.Z,{variant:"h6",className:r.semiBold,children:"Forgot PIN"}),(0,t.jsx)(O.Z,{variant:"h5",className:r.bold,children:"Set your new PIN"}),$?(0,t.jsx)("div",{className:r.spaceTop3,children:me($)}):null,(0,t.jsx)("div",{className:r.spaceTop4}),_?(0,t.jsx)(t.Fragment,{children:me(_)}):null,(0,t.jsx)(v.Z,{placeholder:"New PIN",className:(0,E.Z)(r.input),fullWidth:!0,name:"pin",id:"pin_forgot_pin",onChange:ue}),V?(0,t.jsx)(t.Fragment,{children:me(V)}):null,(0,t.jsx)(v.Z,{placeholder:"Confirm new PIN",className:r.input,fullWidth:!0,name:"verifyPin",id:"verifyPin_forgot_pin",onChange:ue}),(0,t.jsx)(Z.Z,{className:r.submitButton,fullWidth:!0,disabled:p,onClick:de,children:p?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Continue"})]})}):null,ge?(0,t.jsx)(u.Z,{in:ge,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:r.completed,children:[(0,t.jsx)("img",{src:"/icons/double-check.svg",alt:"double check icon"}),"Your PIN has been successfully reset"]}),(0,t.jsx)(Z.Z,{className:r.submitButton,fullWidth:!0,onClick:function(){n(ce?"signup":"login")},children:"proceed to log in"})]})}):null]})};function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ae=function(e){return oe(oe({},(0,d.Z)(e)),{},{root:{"& h5":{fontSize:"139%",letterSpacing:"-0.7px",lineHeight:"1.6em",marginTop:"0.4em"},"& h6":{fontSize:"140%",letterSpacing:"-0.7px"}},input:{border:"0.5px solid rgba(150, 150, 150, 0.4)",borderRadius:"0.3em",padding:"0.84em 1.5em",fontSize:"94%",marginBottom:"1.4em"},submitButton:{backgroundColor:"black",padding:"0.85em",color:"white",fontFamily:e.typography.semiBold.fontFamily,fontSize:"115%","&:hover":{backgroundColor:"#333333"},borderRadius:"0.3em",marginBottom:"4em"},final:{margin:"2em 0em 2.8em",fontFamily:e.typography.semiBold.fontFamily,textAlign:"center","& span":{color:e.palette.primary.main,fontFamily:e.typography.bold.fontFamily,cursor:"pointer"}},errorRoot:{color:e.palette.error.main,marginBottom:"0.8em",fontSize:"90%"}})};function ie(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var se=(0,l.Z)((function(e){return ae(e)})),ce=function(e){var n=e.changeScreen,r=e.successCallback,l=e.updateDineInState,s=e.dineInAuthError,c=(e.dineInAuthLoading,e.clearDineInAuthError),u=(e.dineInState,e.guestLogin,e.vendor),p=se(),d=(0,D.I0)(),m=i.useState({name:"",phone:"",email:""}),h=(0,a.Z)(m,2),f=h[0],b=h[1],g=i.useState(!1),x=(0,a.Z)(g,2),w=x[0],P=x[1],S=i.useState({auth:null,name:null,phone:null,email:null}),k=(0,a.Z)(S,2),C=k[0],I=k[1],F=function(){c();var e,n=f.name,r=f.phone,t=f.email,o={name:null,phone:null,email:null,auth:null};return n.length||(o.name="Please enter your name"),r.length||(o.phone="Please enter your phone number"),r.length<11&&(o.phone="Enter a valid phone number"),t.length&&!t.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,20})+$/)&&(o.email="Please enter a valid email address"),e=Object.values(o).every((function(e){return!Boolean(e)})),I(o),e},T=function(){var e=(0,j.Z)(y().mark((function e(){var t,o,a,i,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F()){e.next=3;break}return e.abrupt("return");case 3:return t=f.name,o=f.phone,a=f.email,P(!0),e.prev=5,e.next=8,q().post("".concat(J.P.url,"user/get/").concat((0,Y.Xl)(o)));case 8:if(i=e.sent){e.next=11;break}throw new Error("Network error");case 11:if(!(s=i.data).error){e.next=14;break}throw new Error(s.message);case 14:s.user?(l({name:t,phone:o,email:a}),n("login"),P(!1)):d((0,B.VC)({name:f.name,phone:f.phone,email:f.email,broughtByVendorId:u?u._id:void 0},(function(e,n){if(P(!1),e)return I(le(le({},C),{},{auth:e}));"function"===typeof r&&r()}))),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),I(le(le({},C),{},{auth:e.t0.message}));case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}(),z=function(e){b(le(le({},f),{},(0,o.Z)({},e.target.name,e.target.value)))},R=function(e){return e?(0,t.jsx)("div",{className:p.errorRoot,children:e}):null};return i.useEffect((function(){s&&I(le(le({},C),{},{auth:s}))}),[s]),(0,t.jsxs)("div",{className:p.root,children:[(0,t.jsx)(O.Z,{variant:"h6",className:p.semiBold,children:"Hi there!"}),(0,t.jsx)(O.Z,{variant:"h5",className:p.bold,children:"Fill in your details to get started"}),C.auth?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:p.spaceTop3}),R(C.auth)]}):null,(0,t.jsx)("div",{className:p.spaceTop4}),R(C.name),(0,t.jsx)(v.Z,{placeholder:"Name",className:(0,E.Z)(p.input),fullWidth:!0,name:"name",onChange:z}),R(C.phone),(0,t.jsx)(v.Z,{placeholder:"Phone number",className:p.input,fullWidth:!0,name:"phone",inputMode:"numeric",inputProps:{inputMode:"numeric"},onChange:z}),R(C.password),(0,t.jsx)(v.Z,{placeholder:"Email address (optional)",className:p.input,fullWidth:!0,name:"email",onChange:z,inputMode:"email",inputProps:{inputMode:"email"}}),(0,t.jsx)(Z.Z,{className:p.submitButton,fullWidth:!0,disabled:w,onClick:T,children:w?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Continue"})]})};function ue(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function pe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var de=function(e){return pe(pe({},(0,d.Z)(e)),{},{root:{"& h5":{fontSize:"139%",letterSpacing:"-0.7px",lineHeight:"1.6em",marginTop:"0.4em"},"& h6":{fontSize:"140%",letterSpacing:"-0.7px"}},input:{border:"0.5px solid rgba(150, 150, 150, 0.4)",borderRadius:"0.3em",padding:"0.84em 1.6em",fontSize:"95%",marginBottom:"1.4em",fontFamily:e.typography.semiBold.fontFamily},submitButton:{backgroundColor:"black",padding:"0.85em",color:"white",fontFamily:e.typography.semiBold.fontFamily,"&:hover":{backgroundColor:"#333333"},borderRadius:"0.3em",fontSize:"110%"},guestSubmitButton:{backgroundColor:"#F0F0F0",color:"black",marginTop:"1em","&:hover":{backgroundColor:"#E0E0E0"},fontFamily:e.typography.bold.fontFamily},final:{margin:"2em 0em 1.8em",fontFamily:e.typography.semiBold.fontFamily,textAlign:"center","& span":{color:e.palette.primary.main,fontFamily:e.typography.bold.fontFamily,cursor:"pointer"}},errorRoot:{color:e.palette.error.main,marginBottom:"0.8em",fontSize:"90%"}})};function me(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function he(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?me(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var fe=(0,l.Z)((function(e){return de(e)})),be=function(e){var n=e.changeScreen,r=e.successCallback,l=e.dineInState,s=e.dineInAuthLoading,c=e.dineInAuthError,u=e.guestLogin,p=e.clearDineInAuthError,d=fe(),m=(0,D.I0)(),h=i.useState({password:""}),f=(0,a.Z)(h,2),b=f[0],g=f[1],x=i.useState(!1),w=(0,a.Z)(x,2),P=w[0],S=w[1],k=i.useState({auth:null,password:null}),C=(0,a.Z)(k,2),I=C[0],F=C[1],T=function(){p();var e,n=b.password,r={password:null,auth:null};return 4===n.length&&Number.isInteger(Number(n))||(r.password="PIN must be 4 numbers"),e=Object.values(r).every((function(e){return!Boolean(e)})),F(r),e},z=function(){var e=(0,j.Z)(y().mark((function e(){var n,t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T()){e.next=3;break}return e.abrupt("return");case 3:n=b.password,t=l.phone,S(!0),m((0,B.x4)(t,n,(function(e,n){S(!1),e?F({name:null,phone:null,password:null,auth:e}):r&&r()})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){return e?(0,t.jsx)("div",{className:d.errorRoot,children:e}):null};return i.useEffect((function(){c&&F(he(he({},I),{},{auth:c}))}),[c]),(0,t.jsxs)("div",{className:d.root,children:[(0,t.jsx)(O.Z,{variant:"h6",className:d.semiBold,children:"Welcome back!"}),(0,t.jsx)(O.Z,{variant:"h5",className:d.bold,children:"This phone number is registered as a Heyfood user, do you want to Login?"}),I.auth?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:d.spaceTop3}),R(I.auth)]}):null,(0,t.jsx)("div",{className:d.spaceTop4}),R(I.password),(0,t.jsx)(v.Z,{placeholder:"Enter 4-digit PIN",className:d.input,fullWidth:!0,name:"password",onChange:function(e){g(he(he({},b),{},(0,o.Z)({},e.target.name,e.target.value)))},inputMode:"numeric",inputProps:{inputMode:"numeric"}}),(0,t.jsx)(Z.Z,{className:d.submitButton,fullWidth:!0,disabled:P||s,onClick:z,children:P?(0,t.jsx)(N.Z,{size:20,color:"secondary"}):"Log in"}),(0,t.jsx)(Z.Z,{className:(0,E.Z)(d.submitButton,d.guestSubmitButton),fullWidth:!0,disabled:P||s,onClick:function(){p(),u()},children:s?(0,t.jsx)(N.Z,{size:20,color:"inherit"}):"SKIP LOG IN AND PROCEED AS GUEST"}),(0,t.jsx)(O.Z,{variant:"body2",className:d.final,children:(0,t.jsx)("span",{onClick:function(){n("forgot-pin")},children:"Forgot PIN"})})]})};function ge(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ye(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var je=(0,l.Z)((function(e){return f(e)})),Oe=function(e){var n=e.open,r=e.handleClose,o=e.successCallback,l=e.defaultScreen,d=void 0===l?"signup":l,m=e.vendor,h=e.landingSrcOverride,f=je(),g=(0,D.I0)(),y=i.useState(d),j=(0,a.Z)(y,2),O=j[0],v=j[1],x=(0,D.v9)((function(e){return{isDineIn:Boolean(e.dineInParams),landingSrc:h||e.src}})),w=x.isDineIn,P=x.landingSrc,Z=i.useState({name:"",phone:"",email:""}),N=(0,a.Z)(Z,2),S=N[0],k=N[1],C=i.useState(!1),E=(0,a.Z)(C,2),I=E[0],F=E[1],T=i.useState(null),R=(0,a.Z)(T,2),W=R[0],A=R[1],_=function(){var e=S.name,n=S.phone,r=S.email;F(!0),g((0,B.VC)({name:e,phone:n,email:r,broughtByVendorId:m?m._id:void 0},(function(e,n){if(F(!1),e)return A(e);U()})))},M=function(e){v(e)},L="aggregator"===P,V="signup"===O&&!w&&L,G="login"===O&&!w&&L,X="forgot-pin"===O,Y="signup"===O&&(w||!L),K="login"===O&&(w||!L),U=function(){o&&o(),r()};return i.useEffect((function(){n?v(d):(A(null),F(!1),k({name:"",phone:"",email:""}))}),[n]),(0,t.jsx)(s.Z,{open:n,onClose:r,BackdropComponent:c.Z,BackdropProps:{timeout:500},className:f.modal,closeAfterTransition:!0,children:(0,t.jsx)(u.Z,{in:n,children:(0,t.jsxs)("div",{className:f.root,children:[(0,t.jsx)("div",{className:f.toolbar,children:(0,t.jsx)(p.Z,{onClick:r,children:(0,t.jsx)(b.Z,{color:"inherit"})})}),(0,t.jsxs)("div",{className:f.main,children:[V?(0,t.jsx)(u.Z,{in:V,children:(0,t.jsx)("div",{children:(0,t.jsx)(z,{changeScreen:function(e){M(e)},successCallback:U})})}):null,G?(0,t.jsx)(u.Z,{in:G,children:(0,t.jsx)("div",{children:(0,t.jsx)(H,{changeScreen:function(e){M(e)},successCallback:U})})}):null,Y?(0,t.jsx)(u.Z,{in:Y,children:(0,t.jsx)(ce,{changeScreen:function(e){return v(e)},updateDineInState:function(e){return function(e){k(ye(ye({},S),e))}(e)},guestLogin:_,dineInAuthError:W,dineInAuthLoading:I,dineInState:S,clearDineInAuthError:function(){return A(null)},successCallback:U,vendor:m})}):null,K?(0,t.jsx)(u.Z,{in:K,children:(0,t.jsx)(be,{changeScreen:function(e){return v(e)},successCallback:U,dineInAuthLoading:I,guestLogin:_,dineInAuthError:W,dineInState:S,clearDineInAuthError:function(){return A(null)}})}):null,X?(0,t.jsx)(u.Z,{in:X,children:(0,t.jsx)("div",{children:(0,t.jsx)(re,{changeScreen:function(e){M(e)}})})}):null]})]})})})}}}]);